{"version":3,"file":"react-tsparticles.js","names":["Component","Particles"],"sources":["../../react-tsparticles/esm/Utils.js","../../react-tsparticles/esm/Particles.js","../../react-tsparticles/esm/index.js"],"sourcesContent":["const isObject = (val) => typeof val === \"object\" && val !== null;\nexport function deepCompare(obj1, obj2, excludeKeyFn = () => false) {\n    if (!isObject(obj1) || !isObject(obj2)) {\n        return obj1 === obj2;\n    }\n    const keys1 = Object.keys(obj1).filter(key => !excludeKeyFn(key)), keys2 = Object.keys(obj2).filter(key => !excludeKeyFn(key));\n    if (keys1.length !== keys2.length) {\n        return false;\n    }\n    for (const key of keys1) {\n        const value1 = obj1[key], value2 = obj2[key];\n        if (isObject(value1) && isObject(value2)) {\n            if (value1 === obj2 && value2 === obj1) {\n                continue;\n            }\n            if (!deepCompare(value1, value2, excludeKeyFn)) {\n                return false;\n            }\n        }\n        else if (Array.isArray(value1) && Array.isArray(value2)) {\n            if (!deepCompareArrays(value1, value2, excludeKeyFn)) {\n                return false;\n            }\n        }\n        else if (value1 !== value2) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction deepCompareArrays(arr1, arr2, excludeKeyFn) {\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n    for (let i = 0; i < arr1.length; i++) {\n        const val1 = arr1[i], val2 = arr2[i];\n        if (Array.isArray(val1) && Array.isArray(val2)) {\n            if (!deepCompareArrays(val1, val2, excludeKeyFn)) {\n                return false;\n            }\n        }\n        else if (isObject(val1) && isObject(val2)) {\n            if (!deepCompare(val1, val2, excludeKeyFn)) {\n                return false;\n            }\n        }\n        else if (val1 !== val2) {\n            return false;\n        }\n    }\n    return true;\n}\n","import React, { Component } from \"react\";\nimport { tsParticles } from \"tsparticles-engine\";\nimport { deepCompare } from \"./Utils\";\nconst defaultId = \"tsparticles\";\nclass Particles extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            init: false,\n            library: undefined,\n        };\n    }\n    destroy() {\n        if (!this.state.library) {\n            return;\n        }\n        this.state.library.destroy();\n        this.setState({\n            library: undefined,\n        });\n    }\n    shouldComponentUpdate(nextProps) {\n        const nextOptions = nextProps.options ?? nextProps.params, currentOptions = this.props.options ?? this.props.params;\n        return (nextProps.url !== this.props.url ||\n            nextProps.id !== this.props.id ||\n            nextProps.canvasClassName !== this.props.canvasClassName ||\n            nextProps.className !== this.props.className ||\n            nextProps.height !== this.props.height ||\n            nextProps.width !== this.props.width ||\n            !deepCompare(nextProps.style, this.props.style) ||\n            nextProps.init !== this.props.init ||\n            nextProps.loaded !== this.props.loaded ||\n            !deepCompare(nextOptions, currentOptions, key => key.startsWith(\"_\")));\n    }\n    componentDidUpdate() {\n        this.refresh();\n    }\n    forceUpdate() {\n        this.refresh().then(() => {\n            super.forceUpdate();\n        });\n    }\n    componentDidMount() {\n        (async () => {\n            if (this.props.init) {\n                await this.props.init(tsParticles);\n            }\n            this.setState({\n                init: true,\n            }, async () => {\n                await this.loadParticles();\n            });\n        })();\n    }\n    componentWillUnmount() {\n        this.destroy();\n    }\n    render() {\n        const { width, height, className, canvasClassName, id } = this.props;\n        return (React.createElement(\"div\", { className: className, id: id },\n            React.createElement(\"canvas\", { className: canvasClassName, style: {\n                    ...this.props.style,\n                    width,\n                    height,\n                } })));\n    }\n    async refresh() {\n        this.destroy();\n        await this.loadParticles();\n    }\n    async loadParticles() {\n        if (!this.state.init) {\n            return;\n        }\n        const id = this.props.id ?? Particles.defaultProps.id ?? defaultId, container = await tsParticles.load({\n            url: this.props.url,\n            id,\n            options: this.props.options ?? this.props.params,\n        });\n        if (this.props.container) {\n            this.props.container.current = container;\n        }\n        this.setState({\n            library: container,\n        });\n        if (this.props.loaded) {\n            await this.props.loaded(container);\n        }\n    }\n}\nParticles.defaultProps = {\n    width: \"100%\",\n    height: \"100%\",\n    options: {},\n    style: {},\n    url: undefined,\n    id: defaultId,\n};\nexport default Particles;\n","import Particles from \"./Particles\";\nexport default Particles;\nexport { Particles };\n"],"mappings":";;;;;AAAA;AACA;AACI;;AAIA;AAGA;;AAEI;AACI;AAGA;;;;;AAaR;;AAEJ;AACI;AAGA;;AAEI;;;;;;AAcJ;;;;;AC/CJ,IAAM,YAAY;AAClB,IAAM,YAAN,MAAM,kBAAkBA,uBAAU;CAC9B,YAAY,OAAO;AACf,QAAM,MAAM;AACZ,OAAK,QAAQ;GACT,MAAM;GACN,SAAS;GACZ;;CAEL,UAAU;AACN,MAAI,CAAC,KAAK,MAAM,QACZ;AAEJ,OAAK,MAAM,QAAQ,SAAS;AAC5B,OAAK,SAAS,EACV,SAAS,QACZ,CAAC;;CAEN,sBAAsB,WAAW;EAC7B,MAAM,cAAc,UAAU,WAAW,UAAU,QAAQ,iBAAiB,KAAK,MAAM,WAAW,KAAK,MAAM;AAC7G,SAAQ,UAAU,QAAQ,KAAK,MAAM,OACjC,UAAU,OAAO,KAAK,MAAM,MAC5B,UAAU,oBAAoB,KAAK,MAAM,mBACzC,UAAU,cAAc,KAAK,MAAM,aACnC,UAAU,WAAW,KAAK,MAAM,UAChC,UAAU,UAAU,KAAK,MAAM,SAC/B,CAAC,YAAY,UAAU,OAAO,KAAK,MAAM,MAAM,IAC/C,UAAU,SAAS,KAAK,MAAM,QAC9B,UAAU,WAAW,KAAK,MAAM,UAChC,CAAC,YAAY,aAAa,iBAAgB,QAAO,IAAI,WAAW,IAAI,CAAC;;CAE7E,qBAAqB;AACjB,OAAK,SAAS;;CAElB,cAAc;AACV,OAAK,SAAS,CAAC,WAAW;AACtB,SAAM,aAAa;IACrB;;CAEN,oBAAoB;AAChB,GAAC,YAAY;AACT,OAAI,KAAK,MAAM,KACX,OAAM,KAAK,MAAM,KAAK,YAAY;AAEtC,QAAK,SAAS,EACV,MAAM,MACT,EAAE,YAAY;AACX,UAAM,KAAK,eAAe;KAC5B;MACF;;CAER,uBAAuB;AACnB,OAAK,SAAS;;CAElB,SAAS;EACL,MAAM,EAAE,OAAO,QAAQ,WAAW,iBAAiB,OAAO,KAAK;AAC/D,sBAAc,cAAc,OAAO;GAAa;GAAe;GAAI,eACzD,cAAc,UAAU;GAAE,WAAW;GAAiB,OAAO;IAC3D,GAAG,KAAK,MAAM;IACd;IACA;IACH;GAAE,CAAC,CAAC;;CAEjB,MAAM,UAAU;AACZ,OAAK,SAAS;AACd,QAAM,KAAK,eAAe;;CAE9B,MAAM,gBAAgB;AAClB,MAAI,CAAC,KAAK,MAAM,KACZ;EAEJ,MAAM,KAAK,KAAK,MAAM,MAAM,UAAU,aAAa,MAAM,WAAW,YAAY,MAAM,YAAY,KAAK;GACnG,KAAK,KAAK,MAAM;GAChB;GACA,SAAS,KAAK,MAAM,WAAW,KAAK,MAAM;GAC7C,CAAC;AACF,MAAI,KAAK,MAAM,UACX,MAAK,MAAM,UAAU,UAAU;AAEnC,OAAK,SAAS,EACV,SAAS,WACZ,CAAC;AACF,MAAI,KAAK,MAAM,OACX,OAAM,KAAK,MAAM,OAAO,UAAU;;;AAI9C,UAAU,eAAe;CACrB,OAAO;CACP,QAAQ;CACR,SAAS,EAAE;CACX,OAAO,EAAE;CACT,KAAK;CACL,IAAI;CACP;AACD,wBAAe;;;;ACjGf,kBAAeC"}